def find_roles(matrix):
    """
    matrix: list of lists (n x n)
        1  -> بازیکن i میگه بازیکن j خوبه (Good)
        -1 -> بازیکن i میگه بازیکن j مافیاست (Mafia)
        0  -> بازیکن i میگه نمی‌دونه

    خروجی:
        لیستی از نقش‌ها
        ۰ = Good (شهروند)
        ۱ = Mafia (مافیا)
    """

    n = len(matrix)
    roles = ["?"] * n  # ? = unknown, G = good, M = mafia

    # مرحله ۱: قضاوت از روی گفته خودش
    for i in range(n):
        if matrix[i][i] == 1:
            roles[i] = "G"   # خودش رو خوب معرفی کرده
        else:
            roles[i] = "M"   # غیر از این → مافیا

    # مرحله ۲: انتشار گفته‌ها
    for i in range(n):
        for j in range(n):
            if i != j:
                claim = matrix[i][j]
                if claim == -1 and roles[i] == "G":
                    roles[j] = "M"
                elif claim == 1 and roles[i] == "G":
                    roles[j] = "G"
                elif claim == -1 and roles[i] == "M":
                    roles[j] = "G"  # مافیا دروغ میگه
                elif claim == 1 and roles[i] == "M":
                    roles[j] = "M"  # مافیا دروغ میگه

    # مرحله ۳: تبدیل به ۰/۱
    return [0 if r == "G" else 1 for r in roles]


# ----------------- استفاده -----------------
if __name__ == "__main__":
    matrix = [
        [1, 0, -1, 1, 1, 0, -1, 1, -1, -1, -1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1],
[-1, 1, 1, 0, 0, -1, 0, -1, 0, 1, 0, 0, -1, 0, 0, 0, 1, -1, 0, 0, -1],
[0, 1, 1, -1, -1, 0, 0, 0, 1, 1, 1, 0, -1, 0, -1, -1, 0, 0, 0, -1, -1],
[0, 0, -1, 1, 0, 0, -1, 1, -1, 0, -1, 1, 1, 1, 1, 1, -1, 1, 1, 1, 0],
[0, 0, -1, 1, 1, 1, -1, 1, -1, 0, -1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1],
[1, 0, 0, 1, 1, 1, 0, 1, 0, -1, 0, 1, 1, 1, 0, 1, -1, 1, 0, 1, 1],
[0, 1, 0, -1, -1, 0, 1, 0, 0, 1, 0, -1, 0, -1, 0, -1, 1, -1, 0, 0, 0],
[1, 0, -1, 0, 0, 1, -1, 1, 0, -1, -1, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0],
[0, 0, 1, -1, -1, 0, 1, 0, 1, 1, 0, 0, 0, -1, -1, -1, 0, 0, -1, 0, -1],
[0, 1, 1, -1, 0, -1, 1, -1, 0, 1, 1, 0, -1, -1, 0, -1, 0, -1, 0, 0, 0],
[-1, 1, 1, 0, 0, 0, 1, -1, 0, 1, 1, -1, -1, 0, -1, -1, 1, 0, 0, -1, 0],
[1, -1, -1, 0, 1, 1, -1, 1, 0, 0, -1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1],
[1, -1, -1, 0, 0, 1, 0, 1, -1, -1, 0, 1, 1, 1, 0, 0, -1, 1, 1, 1, 0],
[1, 0, -1, 1, 1, 0, 0, 1, 0, -1, -1, 1, 1, 1, 1, 1, -1, 0, 0, 0, 1],
[1, 0, -1, 1, 1, 1, -1, 1, -1, -1, -1, 0, 1, 0, 1, 0, -1, 1, 1, 1, 0],
[1, 0, 0, 0, 1, 0, -1, 0, 0, -1, -1, 1, 0, 0, 0, 1, 0, 1, 1, 1, 1],
[-1, 0, 1, -1, 0, 0, 1, 0, 1, 1, 0, 0, -1, 0, 0, -1, 1, -1, -1, 0, 0],
[1, 0, -1, 1, 1, 1, 0, 1, -1, -1, -1, 1, 0, 0, 1, 1, 0, 1, 1, 1, 1],
[1, -1, -1, 1, 0, 1, -1, 1, -1, 0, -1, 0, 1, 1, 1, 1, -1, 0, 1, 1, 1],
[0, 0, -1, 0, 1, 1, -1, 0, -1, -1, 0, 1, 1, 1, 1, 0, -1, 1, 1, 1, 0],
[1, 0, 0, 0, 1, 1, -1, 0, 0, 0, -1, 0, 1, 0, 1, 1, 0, 0, 1, 1, 1]
    ]

    result = find_roles(matrix)
    print("Roles as 0/1:", result)
    print("Roles as text:", ["Good" if r == 0 else "Mafia" for r in result])
